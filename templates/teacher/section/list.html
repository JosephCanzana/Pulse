{% set page_title = "My Sections" %}
{% extends "layout.html" %}

{% block title %}
  Manage Sections
{% endblock %}

{% block main %}
<section class="w-full h-full px-6 py-10 space-y-6 text-[var(--clr-txt-primary)] transition-all duration-300">

  <!-- Header -->
  <div class="flex flex-wrap items-center justify-between">
    <h1 class="text-2xl font-bold text-[var(--clr-primary)]">My Advisory Sections</h1>
  </div>

  <!-- Table -->
  <div class="overflow-x-auto bg-white dark:bg-[var(--clr-bg-secondary)] rounded-2xl shadow-md border border-gray-200">
    <table class="min-w-full text-sm text-left border-collapse">
      <thead class="bg-[var(--clr-primary)] text-white">
        <tr>
          <th class="px-5 py-3 font-semibold">Section</th>
          <th class="px-5 py-3 font-semibold">Course</th>
          <th class="px-5 py-3 font-semibold">Year Level</th>
          <th class="px-5 py-3 font-semibold">Education Level</th>
          <th class="px-5 py-3 font-semibold">Academic Year</th>
          <th class="px-5 py-3 font-semibold text-center">Students</th>
          <th class="px-5 py-3 font-semibold text-center">Status</th>
          <th class="px-5 py-3 font-semibold text-center">Actions</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        {% for section in sections %}
        <tr class="hover:bg-[var(--clr-bg-hover)] transition-all duration-200">
          <td class="px-5 py-3 font-medium">{{ section.section_name }}</td>
          <td class="px-5 py-3">{{ section.course_name or '—' }}</td>
          <td class="px-5 py-3">{{ section.year_level or '—' }}</td>
          <td class="px-5 py-3">{{ section.education_level or '—' }}</td>
          <td class="px-5 py-3">{{ section.academic_year }}</td>
          <td class="px-5 py-3 text-center">{{ section.student_count }}</td>
          <td class="px-5 py-3 text-center">
            {% if section.status %}
              <span class="px-3 py-1 text-xs font-semibold bg-green-100 text-green-700 rounded-full">Active</span>
            {% else %}
              <span class="px-3 py-1 text-xs font-semibold bg-red-100 text-red-700 rounded-full">Archived</span>
            {% endif %}
          </td>
          <td class="px-5 py-3 text-center space-x-2">
            <a href="{{ url_for('teacher.edit_section', section_id=section.section_id) }}"
               class="text-[var(--clr-primary)] hover:text-[var(--clr-secondary)] font-medium">Edit</a>
            <form action="{{ url_for('teacher.toggle_section_status', section_id=section.section_id) }}"
                  method="POST" class="inline">
              <button type="submit"
                      class="text-[var(--clr-accent)] hover:text-[var(--clr-secondary)] font-medium">
                {{ 'Archive' if section.status else 'Activate' }}
              </button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="8" class="text-center py-6 text-[var(--clr-txt-secondary)]">
            No sections found.
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
{% endblock %}
