<!-- BOTTOM NAVIGATION BAR (Mobile Only) -->
<div class="sm:hidden fixed bottom-0 left-0 w-full bg-[var(--clr-glass-light)] backdrop-blur-md border-t border-[var(--clr-glass-border)] shadow-inner z-50">
  <div class="flex justify-around items-center px-2 py-1">

    {% set nav_items = [] %}
    {% if session.get('role') == 'admin' %}
      {% set nav_items = [
        {'url': url_for('admin.dashboard'), 'icon': 'home', 'label': 'Home'},
        {'url': url_for('admin.teacher'), 'icon': 'school', 'label': 'Teachers'},
        {'url': url_for('admin.student'), 'icon': 'people', 'label': 'Students'}
      ] %}
    {% elif session.get('role') == 'teacher' %}
      {% set nav_items = [
        {'url': url_for('teacher.dashboard'), 'icon': 'home', 'label': 'Home'},
        {'url': url_for('teacher.classes'), 'icon': 'class', 'label': 'Classes'},
        {'url': url_for('teacher.manage_sections'), 'icon': 'nest_multi_room', 'label': 'Sections'},
      ] %}
    {% else %}
      {% set nav_items = [
        {'url': url_for('student.dashboard'), 'icon': 'home', 'label': 'Home'},
        {'url': url_for('student.view_classes'), 'icon': 'book', 'label': 'Subjects'}
      ] %}
    {% endif %}

    <!-- Navigation Links -->
    {% for item in nav_items %}
      <a href="{{ item.url }}" class="flex flex-col items-center justify-center text-[var(--clr-txt-secondary)] hover:text-[var(--clr-primary)] transition-colors duration-200 {{ 'text-[var(--clr-primary)]' if request.path == item.url }}">
        <span class="material-symbols-outlined text-xl">{{ item.icon }}</span>
        <span class="text-[0.65rem] mt-0.5 truncate">{{ item.label }}</span>
      </a>
    {% endfor %}

    <!-- Menu Button -->
    <button id="mobile-menu-button" class="flex flex-col items-center justify-center text-[var(--clr-txt-secondary)] hover:text-[var(--clr-primary)] focus:outline-none transition-colors duration-200">
      <span class="material-symbols-outlined text-xl">menu</span>
      <span class="text-[0.65rem] mt-0.5">Menu</span>
    </button>
  </div>
</div>

<!-- FULL SCREEN MOBILE MENU -->
<div id="mobile-menu" class="fixed inset-0 bg-[var(--clr-surface)] z-50 transform translate-y-full transition-transform duration-300 ease-in-out overflow-y-auto">
  <div class="flex flex-col h-full">
    <!-- Header -->
    <div class="flex justify-between items-center p-4 border-b border-[var(--clr-border)]">
      <h2 class="text-xl font-semibold text-[var(--clr-primary)]">Menu</h2>
      <button id="mobile-menu-close" class="text-[var(--clr-txt-secondary)] hover:text-[var(--clr-primary)]">
        <span class="material-symbols-outlined">close</span>
      </button>
    </div>

    <!-- Menu Links -->
    <div class="flex-1 p-4 space-y-3">
      {% for item in nav_items %}
        <a href="{{ item.url }}" class="flex items-center p-3 rounded-xl hover:bg-[var(--clr-glass-light)] transition shadow-sm text-[var(--clr-txt-primary)]">
          <span class="material-symbols-outlined mr-3 text-[var(--clr-primary)]">{{ item.icon }}</span> {{ item.label }}
        </a>
      {% endfor %}

      <!-- Utilities -->
      <div class="mt-6 border-t border-[var(--clr-border)] pt-4 space-y-2">
        <a href="{{ url_for('about') }}" class="flex items-center p-3 rounded-xl hover:bg-[var(--clr-glass-light)] transition shadow-sm text-[var(--clr-txt-primary)]">
          <span class="material-symbols-outlined mr-3 text-[var(--clr-primary)]">info</span> About
        </a>
        <button class="flex items-center p-3 rounded-xl hover:bg-[var(--clr-glass-light)] transition shadow-sm w-full text-left text-[var(--clr-txt-primary)] theme-toggle">
          <span class="material-symbols-outlined mr-3 text-[var(--clr-primary)]">light_mode</span> Toggle Theme
        </button>
        <button onclick="document.getElementById('mobile-menu').classList.add('translate-y-full'); setTimeout(() => openConfirmModal('Confirm Logout', 'Are you sure you want to log out?', '{{ url_for('logout') }}'), 300);" class="flex items-center p-3 rounded-xl hover:bg-[var(--clr-glass-light)] transition shadow-sm w-full text-left text-[var(--clr-txt-primary)]">
          <span class="material-symbols-outlined mr-3 text-[var(--clr-primary)]">logout</span> Logout
        </button>
      </div>
    </div>
  </div>
</div>

<script>
  const menuButton = document.getElementById('mobile-menu-button');
  const menu = document.getElementById('mobile-menu');
  const menuClose = document.getElementById('mobile-menu-close');

  menuButton.addEventListener('click', () => {
    menu.classList.remove('translate-y-full');
  });

  menuClose.addEventListener('click', () => {
    menu.classList.add('translate-y-full');
  });
</script>
