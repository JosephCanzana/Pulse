{% extends "layout.html" %}

{% block title %}
  Teacher List
{% endblock %}

{% block main %}
<a href="{{ url_for('teacher_archive_switch') }}" 
   class="rounded-full border border-blue-600 px-4 py-2 hover:bg-blue-600 hover:text-white transition">
   {{ 'Show Active Teachers' if show_archive else 'Show Archived Teachers' }}
</a>

<div class="flex flex-col items-center justify-center p-4">
  <!-- Add Teacher Button -->
  <a 
    href="{{ url_for('admin_teacher_add') }}" 
    class="rounded-full border border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white transition px-4 py-2 mb-4"
  >
    Add Teacher
  </a>

  <h1 class="text-xl font-semibold mb-4">Teacher List</h1>

  <!-- Table -->
  <div class="overflow-x-auto w-full max-w-5xl">
    <table class="border-collapse border border-gray-300 text-sm w-full">
      <thead class="bg-gray-100">
        <tr>
          <th class="border px-3 py-2">Name</th>
          <th class="border px-3 py-2">Email</th>
          <th class="border px-3 py-2">School ID</th>
          <th class="border px-3 py-2">Education Level</th>
          <th class="border px-3 py-2">Department</th>
          <th class="border px-3 py-2">Account Status</th>
          <th class="border px-3 py-2 text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for t in teachers %}
        <tr class="hover:bg-gray-50 transition">
          <td class="border px-3 py-2">{{ t.first_name }} {{ t.last_name }}</td>
          <td class="border px-3 py-2">{{ t.email }}</td>
          <td class="border px-3 py-2">{{ t.school_id }}</td>
          <td class="border px-3 py-2">{{ t.education_level_name or 'N/A' }}</td>
          <td class="border px-3 py-2">{{ t.department_name or 'N/A' }}</td>
          <td class="border px-3 py-2">
            {% if t.is_verified %}
              <span class="text-green-600 font-medium">Activated</span>
            {% else %}
              <span class="text-red-600 font-medium">Not Activated</span>
            {% endif %}
          </td>
          <td class="border px-3 py-2 text-center space-x-2">
            <!-- Edit Button -->
            <a 
              href="{{ url_for('admin_teacher_edit', school_id=t.school_id) }}" 
              class="text-blue-600 hover:text-blue-800 font-medium"
            >
              Edit
            </a>

            <!-- Delete Form -->
            <form 
              action="{{ url_for('admin_delete') }}" 
              method="POST" 
              class="inline"
              onsubmit="return openConfirmFormModal(event, this, 'Delete Teacher', 'Are you sure you want to delete this teacher?')"
            >
              <input type="hidden" name="id" value="{{ t.user_id }}">
              <input type="hidden" name="table" value="Users">
              <button 
                type="submit" 
                class="text-red-600 hover:text-red-800 font-medium"
              >
                Delete
              </button>
            </form>
            <form action="{{ url_for('admin_reset') }}" 
                  method="POST" 
                  class="inline"
                  onsubmit="return openConfirmFormModal(event, this, 'Reset Teacher Account', 'Are you sure you want to reset password of this teacher?')">
              <input type="hidden" name="id" value="{{ t.user_id }}">
              <input type="hidden" name="table" value="Users">
              <button type="submit" class="text-red-600 hover:text-red-800 font-medium">
                Reset
            </button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
