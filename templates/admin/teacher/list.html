{% extends "layout.html" %}

{% block title %}
  Teacher List
{% endblock %}

{% block main %}

<!-- Page Header -->
<div class="flex flex-wrap items-center justify-between mb-8 gap-3">
  <a href="{{ url_for('teacher_archive_switch') }}" 
     class="flex items-center gap-2 rounded-full border border-[var(--clr-border)] bg-[var(--clr-glass-light)] backdrop-blur-md px-5 py-2.5 text-[var(--clr-txt-primary)] font-medium shadow-md hover:shadow-lg hover:border-[var(--clr-glow-primary)] hover:bg-[var(--clr-glass-border)] transition-all">
    <span class="material-symbols-rounded text-[var(--clr-txt-hover)]">archive</span>
    {{ 'Show Active Teachers' if show_archive else 'Show Archived Teachers' }}
  </a>

  <a href="{{ url_for('admin_teacher_add') }}" 
     class="flex items-center gap-2 rounded-full border border-[var(--clr-border)] bg-[var(--clr-glass-light)] backdrop-blur-md px-5 py-2.5 text-[var(--clr-txt-primary)] font-medium shadow-md hover:shadow-lg hover:border-[var(--clr-glow-primary)] hover:bg-[var(--clr-glass-border)] transition-all">
    <span class="material-symbols-rounded text-[var(--clr-txt-hover)]">person_add</span>
    Add Teacher
  </a>
</div>

<!-- Title -->
<h1 class="text-2xl font-semibold mb-6 text-[var(--clr-txt-primary)]">
  Teacher List
</h1>

<!-- Glass Table Container -->
<div class="overflow-x-auto rounded-3xl border border-[var(--clr-glass-border)] bg-[var(--clr-glass-light)] backdrop-blur-md shadow-xl">
  <table class="w-full border-collapse text-sm">
    <thead class="bg-[var(--clr-surface-alt)]/70 text-[var(--clr-txt-secondary)]">
      <tr>
        <th class="px-4 py-3 text-left">Name</th>
        <th class="px-4 py-3 text-left">Email</th>
        <th class="px-4 py-3 text-left">School ID</th>
        <th class="px-4 py-3 text-left">Education Level</th>
        <th class="px-4 py-3 text-left">Department</th>
        <th class="px-4 py-3 text-center">Account Status</th>
        <th class="px-4 py-3 text-center">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for t in teachers %}
      <tr class="border-t border-[var(--clr-border)] hover:bg-[var(--clr-glass-border)]/40 transition-all">
        <td class="px-4 py-3 whitespace-nowrap">{{ t.first_name }} {{ t.last_name }}</td>
        <td class="px-4 py-3 whitespace-nowrap">{{ t.email }}</td>
        <td class="px-4 py-3 whitespace-nowrap">{{ t.school_id }}</td>
        <td class="px-4 py-3 whitespace-nowrap">{{ t.education_level_name or 'N/A' }}</td>
        <td class="px-4 py-3 whitespace-nowrap">{{ t.department_name or 'N/A' }}</td>
        <td class="px-4 py-3 text-center">
          {% if t.is_verified %}
            <span class="text-[var(--clr-success)] font-medium flex items-center justify-center gap-1">
              <span class="material-symbols-rounded text-sm">check_circle</span>
              Activated
            </span>
          {% else %}
            <span class="text-[var(--clr-error)] font-medium flex items-center justify-center gap-1">
              <span class="material-symbols-rounded text-sm">cancel</span>
              Not Activated
            </span>
          {% endif %}
        </td>
        <td class="px-4 py-3 text-center">
          <div class="flex justify-center gap-2">

            <!-- Edit -->
            <a href="{{ url_for('admin_teacher_edit', school_id=t.school_id) }}" 
               class="flex items-center justify-center gap-1 rounded-full bg-[var(--clr-glass-light)] border border-[var(--clr-border)] px-3 py-1.5 text-[var(--clr-txt-hover)] hover:bg-[var(--clr-glow-tertiary)]/10 hover:shadow-md transition-all">
              <span class="material-symbols-rounded text-base">edit</span> 
              Edit
            </a>

            <!-- Delete -->
            <form action="{{ url_for('admin_delete') }}" 
                  method="POST" 
                  class="inline"
                  onsubmit="return openConfirmFormModal(event, this, 'Delete Teacher', 'Are you sure you want to delete this teacher?')">
              <input type="hidden" name="id" value="{{ t.user_id }}">
              <input type="hidden" name="table" value="Users">
              <button type="submit" 
                      class="flex items-center justify-center gap-1 rounded-full bg-[var(--clr-glass-light)] border border-[var(--clr-border)] px-3 py-1.5 text-[var(--clr-error)] hover:bg-[var(--clr-error)]/10 hover:shadow-md transition-all">
                <span class="material-symbols-rounded text-base">delete</span> 
                Delete
              </button>
            </form>

            <!-- Reset -->
            <form action="{{ url_for('admin_reset') }}" 
                  method="POST" 
                  class="inline"
                  onsubmit="return openConfirmFormModal(event, this, 'Reset Teacher Account', 'Are you sure you want to reset password of this teacher?')">
              <input type="hidden" name="id" value="{{ t.user_id }}">
              <input type="hidden" name="table" value="Users">
              <button type="submit" 
                      class="flex items-center justify-center gap-1 rounded-full bg-[var(--clr-glass-light)] border border-[var(--clr-border)] px-3 py-1.5 text-[var(--clr-warning)] hover:bg-[var(--clr-warning)]/10 hover:shadow-md transition-all">
                <span class="material-symbols-rounded text-base">refresh</span> 
                Reset
              </button>
            </form>

          </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}
